<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title> حذف کرنل لینوکس با دیسک زنده - دست نوشته های یک تازه کار </title>
    <meta name="description" content="در این پست یک تجربه که نحوه برگرداندن ubuntu می باشد، ارائه شده است."/>
    <meta name="keywords" content=" linux, kernel, live, ubuntu" />

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <!-- link href="style/bootstrap/css/bootstrap.css" rel="stylesheet" crossorigin="anonymous" -->

    <link href="https://rawgit.com/richleland/pygments-css/master/github.css" rel="stylesheet" crossorigin="anonymous">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
    body {
      direction: rtl;
    }
    p {
        font-size: 1.3em;
        line-height: 1.5em;
        text-align: justify;
      }
  pre {
        direction: ltr;
        border-left: 5px solid #6ce26c;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header navbar-right">
          <a class="navbar-brand" href="/">دست نوشته های یک تازه کار</a>
        </div>
        <ul class="nav navbar-nav navbar-right">
            
                
                    <li><a href="/about.html" title="درباره ما">درباره ما</a></li>
                
                    <li><a href="/contacus.html" title="ارتباط با ما">ارتباط با ما</a></li>
                
                    <li><a href="http://shgn.ir/tag/linux.html" title="linux">linux</a></li>
                
                    <li><a href="http://shgn.ir/yii2/" title="معرفی Yii2">معرفی Yii2</a></li>
                
            
          </ul>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="col-md-9">
            
    <div itemscope itemtype="http://schema.org/NewsArticle">
    <meta itemscope itemprop="mainEntityOfPage"  itemType="https://schema.org/WebPage" itemid="http://shgn.ir/2013-04-03/live_remove_linux_kernel.html"/>
    <div class="page-header">
      <h3 itemprop="name">حذف کرنل لینوکس با دیسک زنده</h3>
      
      
        <small>
          <p class="text-right">
            ارسال شده <span itemprop="author" itemscope itemtype="https://schema.org/Person">
                توسط <span itemprop="name">سید سجاد شاهچراغیان</span>
              </span>
              در تاریخ <span itemprop="datePublished">2013-04-03</span>
          </p>
        </small>
      
    </div>
      <section itemprop="articleBody">
        <p>هفته قبل خبر ریلیز شدن گنوم ۳.۸ منتشر شده بود. و می خواستم روی اوبونتوی ۱۲.۰۴ نصب کنم ولی متأسفانه نمی شد. بعد کمی تحقیق متوجه شدم که کرنل اوبونتو ۱۲.۰۴ قدیمی است و از طرفی هم جدید ترین کرنلی که اوبونتو توی جدید ترین نسخه از سیستم عاملش که ۱۳.۰۴ <code>"RARING"</code>  می باشد، استفاده کرده است، ۳.۸ یا شاید هم جدیدتر از آن باشد.</p>
<p>بر همین اساس و پس از کمی تحقیق برای نحوه نصب کرنل نسخه جدید روی نسخه های قبلی اوبونتو تونستم، آن کرنل را روی ۱۲.۱۰ بدون هیچ مشکلی نصب کنم. بعد از آن تصمیم گرفتم که این کرنل را روی اوبونتو ۱۲.۰۴ بود هم نیز نصب کنم. نصب کرنل همانا و بالا نیامدن سیستم همانا. این مشکل برای ۳ یا ۴ روز بنده را مشغول خودش کرده بود. تا اینکه به این فکر افتادم تا اون کرنل را حذف کنم تا سیستم بتواند با کرنل قبلی خودش کار کنه.</p>
<p><img alt="ubuntu-break" src="ubuntu-broken-470x260.jpg" /></p>
<h3>مراحل حذف کرنل</h3>
<p>از آن جایی که هیچ نوع دسترسی به سیستم عامل نداشتم مجبور شدم تا از دیسک زنده اوبونتو برای رفع مشکل استفاده کنم.</p>
<p>بعد از بالا آمدن سیستم با دیسک زنده داخل برنامه ترمینال شدم و با استفاده از دستور زیر تونستم پارتیشنی را که لینوکس لوکال روی آن نصب است را پیدا کنم:</p>
<pre class="codehilite"><code>sudo fdisk -l</code></pre>


<p>سپس برای استفاده از و اعمال تغییرات باید آن پارتیشن را به صورت زیر <code>mount</code> می کردم:</p>
<pre class="codehilite"><code>sudo mount /dev/sda1 /media
sodu mount --bind /media/dev /dev
sudo mount --bind /media/sys /sys
sudo mount --bind /media/proc /proc</code></pre>


<p>حال لازم بود تا فهرست بسته های کرنلی را که بر روی سیستم نصب شده بودند را جهت حذف، مشاهده کنم، برای همین باید برای سیستم مسیر پارتیشن <code>mount</code> شده را به عنوان <code>root</code> مشخص می کردم:</p>
<pre class="codehilite"><code>sudo chroot /media</code></pre>


<p>در غیر این صورت فهرست بسته های دیسک زنده را نمایش می دهد.</p>
<pre class="codehilite"><code>dpkg --get-selections | grep linux-image
...
dpkg --get-selections | grep linux-headers
...</code></pre>


<p>با اجرای دستورات فوق لیست بسته های کرنل را به همراه وضعیت نصب آنها می توانید مشاهده کنید. اکنون طبق دستورات زیر و با استفاده نام کامل بسته کرنلی که می خواهدی حذف کنید، اقدام کنید. در اینجا فرض می کنیم که نسخه کرنل ما ۳.۸.۵ می باشد:</p>
<pre class="codehilite"><code>sudo apt-get purge linux-image-3.8.5-generic linux-image-extra-3.8.5-generic
sudo apt-get purge linux-headers-3.8.5 linux-headers-3.8.5-generic-pae</code></pre>


<p>و در نهایت هم لازم است تا گراب را به روز رسانی کنید:</p>
<pre class="codehilite"><code>sudo update-grub</code></pre>


<p>اکنون کرنل مشکل ساز حذف و سیستم با کرنل قبلی خودش بالا خواهد آمد، فقط کافی است نا سیستم را دوباره راه اندازی کنیم.</p>
      </section>
      <div>
        برچسب ها:
      
        <a href="/tag/linux.html">
            <span class="label label-default" itemprop="about">linux</span>
        </a>
      
        <a href="/tag/kernel.html">
            <span class="label label-default" itemprop="about">kernel</span>
        </a>
      
        <a href="/tag/live.html">
            <span class="label label-default" itemprop="about">live</span>
        </a>
      
        <a href="/tag/ubuntu.html">
            <span class="label label-default" itemprop="about">ubuntu</span>
        </a>
      
    </div>
    </div>

        </div>
        <div class="col-md-3">
          <div class="panel-group">
            <div class="panel panel-primary">
              <div class="panel-heading">
                من در stackexchange.com
              </div>
              <div class="panel-body">
                <div class="col-md-3 col-md-offset-9">
                  <a href="http://stackexchange.com/users/887576" target="_blank">
                    <img src="http://stackexchange.com/users/flair/887576.png" width="208" height="58" alt="profile for shgnInc on Stack Exchange, a network of free, community-driven Q&A sites" title="profile for shgnInc on Stack Exchange, a network of free, community-driven Q&A sites">
                  </a>
                </div>
              </div>
            </div>
            
            <div class="panel-group">
            <div class="panel panel-primary">
              <div class="panel-heading">
                تازه ترین مطالب
              </div>
              <div class="panel-body">
                <div class="col-md-3 col-md-offset-9">
                  <a href="http://stackexchange.com/users/887576" target="_blank">
                    <img src="http://stackexchange.com/users/flair/887576.png" width="208" height="58" alt="profile for shgnInc on Stack Exchange, a network of free, community-driven Q&A sites" title="profile for shgnInc on Stack Exchange, a network of free, community-driven Q&A sites">
                  </a>
                </div>
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>
    <hr />
    <footer>
      <div class="container">
        <div class="row">
            <div class="col-md-6">
              
              <strong>پیشنهادی های</strong>
              <ul>
                
                    <li><a href="https://github.com/shgninc">GitHub</a></li>
                
                    <li><a href="http://google.com">Google</a></li>
                
              </ul>
              
            </div>
            <div class="col-md-6">
              <strong>دسترسی های ساده</strong>
              <ul>
                <li><a href="/">تمامی پست ها</a></li>
                <li><a href="/tags.html">فهرست تگ ها</a></li>
              </ul>
            </div>
            <div class="col-md-12">
              <p class="text-center"><small>shgn.ir &copy; 2018</small></p>
            </div>
        </div>
      </div>
    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>
  </body>
</html>